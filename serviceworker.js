const CACHE_NAME="offline",INITIAL_CACHE=["/","/css/site.css","/css/home.css","/js/site.js","/img/site/icon-skills.svg","/img/site/icon-projects.svg","/img/site/icon-github.svg","/img/site/icon-linkedin.svg"];function updateCache(e,t){caches.open(CACHE_NAME).then(n=>{n.put(e,t)})}function getNetworkResponse(e){return fetch(e).then(t=>(updateCache(e,t.clone()),t))}function getAlternativeImage(e){return caches.open(CACHE_NAME).then(e=>e.matchAll()).then(t=>{const n=e.url.slice(0,e.url.lastIndexOf("-"));return t.filter(e=>e.url.includes(n)).reduce((e,t)=>{const n=e=>e.headers.get("Content-Length");return n(e)>n(t)?e:t})}).catch(()=>{throw new Error("No alternative cache entry")})}function getCacheResponse(e){return caches.match(e).then(e=>{if(e)return e;throw new Error("No cache entry")}).catch(t=>{if("image"===e.destination)return getAlternativeImage(e);throw t})}self.addEventListener("install",e=>{e.waitUntil(caches.open(CACHE_NAME).then(e=>{e.addAll(INITIAL_CACHE)}))}),self.addEventListener("activate",e=>{e.waitUntil(clients.claim())}),self.addEventListener("fetch",e=>{"GET"===e.request.method&&e.respondWith(getNetworkResponse(e.request).catch(()=>getCacheResponse(e.request)).catch(t=>new Response(null,{url:e.request.url,status:404,statusText:t.message})))});