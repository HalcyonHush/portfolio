function Menu(e,t,n,i){this.button=e,this.text=t,this.container=n,this.mediaQuery=i,this.pageIsWide=window.matchMedia("(min-width: "+this.mediaQuery+")"),this.pageIsWide.addListener(this.reactToViewport.bind(this)),this.reactToViewport(this.pageIsWide),this.button.addEventListener("click",this.reactToMenuButton.bind(this)),this.reactToClickOffMenu=function(e){this._reactToClickOffMenu(e)}.bind(this),this.reactToEscapeKey=function(e){this._reactToEscapeKey(e)}.bind(this)}"serviceWorker"in navigator&&navigator.serviceWorker.register("/serviceworker.js"),document.addEventListener("DOMContentLoaded",function(){menuButton=document.querySelector("#site-nav-menu-button"),menuButtonText=menuButton.querySelector("#site-nav-menu-button-text"),menuContent=document.querySelector("#site-nav-content"),new Menu(menuButton,menuButtonText,menuContent,"48rem")},{once:!0}),Menu.prototype={get state(){return this._state},set state(e){"open"===e?(this.updateDOM("add"),setTimeout(function(){this.updateView("open"),this.updateButtonText("close"),this.setListenerClickOffMenu(),this.setListenerEscapeKey(),this.setListenerScrollOutOfView()}.bind(this),50)):"closed"===e?("fixed"===this.state&&this.updateDOM("remove"),this.updateView("closed"),this.updateButtonText("open"),this.removeListenerClickOffMenu(),this.removeListenerEscapeKey(),this.removeListenerScrollOutOfView(),void 0===this.transitionLength&&"complete"===document.readyState&&this.getTransitionLength(),setTimeout(function(){"closed"===this.state&&this.updateDOM("remove")}.bind(this),this.transitionLength)):"fixed"===e&&(this.updateDOM("add"),this.removeListenerClickOffMenu(),this.removeListenerEscapeKey(),this.removeListenerScrollOutOfView()),this._state=e}},Menu.prototype.reactToViewport=function(){this.pageIsWide.matches?this.state="fixed":this.state="closed"},Menu.prototype.reactToMenuButton=function(){"open"===this.state?this.state="closed":this.state="open"},Menu.prototype._reactToClickOffMenu=function(e){e.target.closest("#site-nav-content")||(this.state="closed")},Menu.prototype._reactToEscapeKey=function(e){"Escape"!==e.key&&"Esc"!==e.key||(this.state="closed")},Menu.prototype.reactToScrollOutOfView=function(e){e[0].boundingClientRect.top+window.pageYOffset>=0&&(this.state="closed")},Menu.prototype.updateDOM=function(e){"add"===e?this.container.removeAttribute("style","display: none"):this.container.style.display="none"},Menu.prototype.updateView=function(e){"open"===e?this.button.setAttribute("aria-expanded","true"):this.button.setAttribute("aria-expanded","false")},Menu.prototype.updateButtonText=function(e){this.text.textContent="open"===e?"Open":"Close"},Menu.prototype.getTransitionLength=function(){var e=window.getComputedStyle(this.container).transitionDelay,t=window.getComputedStyle(this.container).transitionDuration;this.transitionLength=1e3*(parseFloat(e)+parseFloat(t))},Menu.prototype.setListenerClickOffMenu=function(){document.addEventListener("click",this.reactToClickOffMenu)},Menu.prototype.removeListenerClickOffMenu=function(){document.removeEventListener("click",this.reactToClickOffMenu)},Menu.prototype.setListenerEscapeKey=function(){document.addEventListener("keyup",this.reactToEscapeKey)},Menu.prototype.removeListenerEscapeKey=function(){document.removeEventListener("keyup",this.reactToEscapeKey)},Menu.prototype.setListenerScrollOutOfView=function(){"IntersectionObserver"in window&&(this.observer=new IntersectionObserver(this.reactToScrollOutOfView.bind(this),{threshold:.3}),this.observer.observe(this.container))},Menu.prototype.removeListenerScrollOutOfView=function(){this.observer&&this.observer.unobserve(this.container)},Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});